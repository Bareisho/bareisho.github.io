/*!  2018-11-20 */

!function(e,t){var a=e.documentElement,n="orientationchange"in window?"orientationchange":"resize",r=function(){var e=a.clientWidth;e&&(a.style.fontSize=e/320*20+"px")};e.addEventListener&&(t.addEventListener(n,r,!1),e.addEventListener("DOMContentLoaded",r,!1))}(document,window);var eventUtil={addHanlder:function(e,t,a){e.addEventListener(t,a,!1)},removeHander:function(e,t,a){e.removeEventListener(t,a,!1)}},currentDay=new Date,day=currentDay.getDate().toString(),month=currentDay.getMonth().toString(),year=currentDay.getFullYear().toString(),fullDay=year+month+day,active="one";"2018111"==fullDay?active="two":"2018112"==fullDay&&(active="three");var utils={bind:function(e,t){var a=document.querySelectorAll(e);length=a.length;for(var n=length;n--;){var r=a[n];eventUtil.addHanlder(r,"click",t)}},requestAjax:function(e,t){var a=new XMLHttpRequest;if(type=e.type,url=e.url,data=e.data,a.onreadystatechange=function(){4==a.readyState&&(200<=a.status&&a.status<300||304==a.status?(t(a.responseText),a=null):alert("error: "+a.status))},"get"==type&&data)for(var n in data)url=openDiscuss.addUrlParam(url,n,data[n]);return a.open(type,url,!0),"post"==type&&a.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),a.send(data||null),a}},openDiscuss={click:function(e){var t=e.currentTarget,a=t.getAttribute("data-id"),n=t.getAttribute("data-name");url=openDiscuss.addUrlParam("discussion.html","id",a),url=openDiscuss.addUrlParam(url,"name",n),window.open("./"+url)},addUrlParam:function(e,t,a){return e+=-1==e.indexOf("?")?"?":"&",e+=encodeURIComponent(t)+"="+encodeURIComponent(a)},bind:function(){utils.bind(".user-info",openDiscuss.click)}},getTheme={rendered:!1,request:function(e){utils.requestAjax({url:"./json/theme.json",type:"get",data:{id:e}},getTheme.sortData)},sortData:function(e){for(var t=[],a=[],n=(e=JSON.parse(e)).length;n--;)"am"==e[n].time&&(t=e[n].userInfo),"pm"==e[n].time&&(a=e[n].userInfo);getTheme.renderData(t,activeHeader.activeid,"am"),getTheme.renderData(a,activeHeader.activeid,"pm"),openDiscuss.bind(),getTheme.rendered=!0},renderData:function(e,t,a){for(var n=e.length,r="",i=document.querySelector("#s-"+t+" ."+a),d=0;d<n;d++){var c=e[d];r+='<div class="user-info" data-id="'+c.id+'" data-name="'+c.userName+'"><p class="user-title">'+c.order+'</p><p class="user-brief">'+c.issue+"</p></div>"}i.innerHTML=r}},activeHeader={activeid:active,setActive:function(e){e?activeHeader.cache[e]||(getTheme.request(e),activeHeader.cache[e]=!0):(getTheme.request(activeHeader.activeid),activeHeader.bind(),activeHeader.cache.one=!0)},bind:function(){utils.bind(".schedule-date .date",activeHeader.click)},cache:{one:!1,two:!1,three:!1},click:function(e){var t=e.currentTarget;if(!t.classList.contains("active")){var a=t.getAttribute("id"),n=document.querySelector("#s-"+a),r=document.querySelectorAll(".schedule-list"),i=r.length,d=document.querySelector(".schedule-date .active");activeHeader.activeid=a,d.classList.remove("active"),t.classList.add("active"),activeHeader.setActive(a);for(var c=i;c--;){r[c].classList.add("hide")}n.classList.remove("hide")}}};activeHeader.setActive();