/*!  2018-11-20 */

!function(t,e){var n=t.documentElement,a="orientationchange"in window?"orientationchange":"resize",o=function(){var t=n.clientWidth;t&&(n.style.fontSize=t/320*20+"px")};t.addEventListener&&(e.addEventListener(a,o,!1),t.addEventListener("DOMContentLoaded",o,!1))}(document,window);var util={dealSearch:function(t){for(var e,n,a=(e=(t=0==t.indexOf("?")?t.substring(1):t).split("&")).length;a--;){var o=e[a];"id"!=(o=o.split("="))[0]?"name"!=o[0]||(n=decodeURIComponent(o[1])):this.id=decodeURIComponent(o[1])}this.setUser(n)},id:"",setUser:function(t){document.querySelector(".discuss-user").innerHTML=t},requestAjax:function(t,e){var n=new XMLHttpRequest;if(type=t.type,url=t.url,data=t.data,n.onreadystatechange=function(){4==n.readyState&&(200<=n.status&&n.status<300||304==n.status?(e(n.responseText),n=null):alert("error: "+n.status))},n.open(type,url,!0),"post"==type){n.setRequestHeader("Content-Type","application/x-www-form-urlencoded");var a="";for(var o in data)a=util.addUrlParam(a,o,data[o])}n.send(a.substring(1))},addUrlParam:function(t,e,n){return t+=-1==t.indexOf("?")?"?":"&",t+=encodeURIComponent(e)+"="+encodeURIComponent(n)},submitData:function(){loading.show();var t=document.querySelector("#result").value;util.requestAjax({url:"./json/submit.json",type:"post",data:{id:util.id,value:t}},loading.hide)}},loading={target:document.querySelector(".loading"),show:function(){loading.target.classList.remove("hide")},hide:function(t){loading.target.classList.add("hide"),toast("提交成功")}};function toast(t){var e=document.querySelector(".toast-wrap");toastContent=e.querySelector(".toast-msg"),toastContent.innerHTML=t,e.classList.remove("toastAnimate"),setTimeout(function(){e.classList.add("toastAnimate")},100)}util.dealSearch(location.search);var button=document.querySelector("#submit");button.addEventListener("click",util.submitData,!1);